<ion-header>
  <ion-toolbar>
    
    <ion-buttons slot="start">
      <ion-menu-toggle>
        <ion-button>
          <ion-icon slot="icon-only" name="menu"></ion-icon>
        </ion-button>
      </ion-menu-toggle>
    </ion-buttons>
    
    <ion-title> Meal</ion-title>
    
    <ion-img class="nav-logo" src="../../../assets/img/logo-bang-small.png" slot="end"></ion-img>

  </ion-toolbar>
</ion-header>

<ion-content padding class="track-meal">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Day Change Slider -->
  <ion-toolbar class="day-change-slider" (swipeleft)="handleSwipeLeft()" (swiperight)="handleSwipeRight()">
    <ion-card>
        <ion-icon class="arrow-back" *ngIf="dayNumber > 1" (click)="handleSwipeRight()" name="arrow-back" slot="start"></ion-icon>
        <section>      
            <ion-card-header>
                <ion-card-title class="dc-slider-title-label">{{day}} <span *ngIf="!day">DAY {{dayNumber}}</span></ion-card-title>
            </ion-card-header>
            
            <!-- <ion-card-content class="CurrentProgress dc-slider-title" [ngStyle]="{ 'color' : circlecolor}"> -->
            <ion-card-content class="dc-slider-title current-progress">
              <strong> Current progress <br/> <span>{{status}} </span></strong> 
            </ion-card-content>

            <ng-template #templateName>
                <ion-card-content class="dc-slider-title">
                    <div class="dayNumber">DAY {{dayNumber}}</div>
                </ion-card-content>
            </ng-template>

        </section>
        <ion-icon class="arrow-forward" *ngIf="!today" (click)="handleSwipeLeft()" name="arrow-forward" slot="end"></ion-icon>
    </ion-card>
  </ion-toolbar>


  <!-- Diet Breakdown by Category Bar Chart -->
  <div class="chart">
    <canvas baseChart *ngIf="pieChartData"
      [data]="pieChartData" 
      [labels]="pieChartLabels" 
      [chartType]="pieChartType"
      [options]="pieChartOptions"
      [plugins]="pieChartPlugins"
      [legend]="pieChartLegend"
      [colors]="pieChartColors">
    </canvas>
    
    <div class="namePercentt">
      <span class="name_percent"> <strong> Protein </strong> <br/>{{caloriesFromProteinAsP}}%</span>  
      <br/><span class="name_percent"> <strong> Carbs </strong> <br/>{{caloriesFromCarbsAsP}}% </span>
      <br/><span class="name_percent"> <strong> Fat </strong> <br/>{{caloriesFromFatAsP}}%</span>
    </div>

    <p class="total-calories-daily text-center">Total Calories Eaten Today: <span style="font-weight: bold; color: #0417c2;" class="value">{{caloriesConsumed}}</span></p>

  </div>
   

  <!-- Food List -->
  <ion-list class="foodList">

    <ion-item *ngIf="meals.length > 0" class="list-header">
      <h3 class="text-center text-white">Food List</h3>
    </ion-item>

    <ion-item-sliding *ngFor="let meal of meals">
      <ion-item class="foodListBg">
        <ion-label class= "meal">{{meal.meal_name}} <span>{{meal.calories}} cal</span></ion-label>
      </ion-item>

      <ion-item-options *ngIf="today" side="end">
        <ion-item-option color="danger" (click)="removeMeal(meal.id)"><ion-icon name="trash"></ion-icon></ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <section class="content-footer">
    
    <ion-button expand="block" class="addFood btn btn-primary block-center" *ngIf="today" (click)="openFoodModal()" class="button">Add Food</ion-button>

    <!-- See https://www.npmjs.com/package/ng-circle-progress for settings -->
    <div class = "circleProgress">
      <circle-progress [backgroundColor]="circlecolor" [percent]="percent" [subtitle]="circlesubtitle" ></circle-progress>
    </div>

  </section>

</ion-content>